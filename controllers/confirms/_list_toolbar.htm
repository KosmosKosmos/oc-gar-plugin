<a
        data-request="onExport"
        data-stripe-load-indicator
        class="btn btn-primary oc-icon-download"
        data-request-success="showProtectedDownload(data)"
        target="_blank"
        data-toggle="modal"
        href="#export_info"
>
    <?= e(trans('kosmoskosmos.gar::lang.confirms.export')) ?>
</a>
<div class="control-popup modal fade" id="export_info" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h6 class="modal-title">
                    <strong>Download link:</strong>  <span id="export_download_link"></span><br>
                    <strong>ZIP file password:</strong>  <span id="export_download_password"></span>
                </h6>
            </div>
        </div>
    </div>
</div>

<script>
    function showProtectedDownload(data) {
        $('#export_download_link').html('<a href="/backend/kosmoskosmos/gar/confirms/download/' + data.file + '">Download file</a>');
        $('#export_download_password').text(data.password);
    }
</script>